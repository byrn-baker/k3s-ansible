apiVersion: v1
kind: ConfigMap
metadata:
  name: proxmox-ingress-config
  namespace: traefik
data:
  fileConfig.yaml: |
    http:
      routers:
        proxmox:
          entryPoints:
            - websecure
          rule: Host(`hp-pve01.local.byrnbaker.me`)
          middlewares:
            - reverse-prox-default-headers
          tls: {}
          service: proxmox
      services:
        proxmox:
          loadBalancer:
            servers:
              - url: https://192.168.100.235:8006
            passHostHeader: true
      middlewares:
        reverse-prox-default-headers:
          headers:
            frameDeny: true
            sslRedirect: true
            browserXssFilter: true
            contentTypeNosniff: true
            forceSTSHeader: true
            stsIncludeSubdomains: true
            stsPreload: true
            stsSeconds: 15552000
            customFrameOptionsValue: SAMEORIGIN
            customRequestHeaders:
              X-Forwarded-Proto: https
      default-whitelist:
        ipWhiteList:
          sourceRange:
          - "10.0.0.0/8"
          - "192.168.0.0/16"
          - "172.16.0.0/12"
      secured:
        chain:
          middlewares:
          - default-whitelist
          - reverse-prox-default-headers